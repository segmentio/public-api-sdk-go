/*
Segment Public API

The Segment Public API helps you manage your Segment Workspaces and its resources. You can use the API to perform CRUD (create, read, update, delete) operations at no extra charge. This includes working with resources such as Sources, Destinations, Warehouses, Tracking Plans, and the Segment Destinations and Sources Catalogs.  All CRUD endpoints in the API follow REST conventions and use standard HTTP methods. Different URL endpoints represent different resources in a Workspace.  See the next sections for more information on how to use the Segment Public API.

API version: 57.4.0
Contact: friends@segment.com
*/

// Code generated by OpenAPI Generator (https://openapi-generator.tech); DO NOT EDIT.

package api

import (
	"bytes"
	"encoding/json"
	"fmt"
)

// JourneyState struct for JourneyState
type JourneyState struct {
	AudienceEntryState         *AudienceEntryState
	ConditionSplitState        *ConditionSplitState
	DestinationState           *DestinationState
	EventEntryState            *EventEntryState
	EventSplitWithTimeoutState *EventSplitWithTimeoutState
	ExitState                  *ExitState
	RandomSplitState           *RandomSplitState
	SimpleDelayState           *SimpleDelayState
}

// Unmarshal JSON data into any of the pointers in the struct
func (dst *JourneyState) UnmarshalJSON(data []byte) error {
	var err error

	decoder := json.NewDecoder(bytes.NewReader(data))
	decoder.DisallowUnknownFields()

	// try to unmarshal JSON data into AudienceEntryState
	decoder = json.NewDecoder(bytes.NewReader(data))
	decoder.DisallowUnknownFields()
	err = decoder.Decode(&dst.AudienceEntryState)
	if err == nil {
		jsonAudienceEntryState, _ := json.Marshal(dst.AudienceEntryState)
		if string(jsonAudienceEntryState) == "{}" { // empty struct
			dst.AudienceEntryState = nil
		} else {
			return nil // data stored in dst.AudienceEntryState, return on the first match
		}
	} else {
		dst.AudienceEntryState = nil
	}

	// try to unmarshal JSON data into ConditionSplitState
	decoder = json.NewDecoder(bytes.NewReader(data))
	decoder.DisallowUnknownFields()
	err = decoder.Decode(&dst.ConditionSplitState)
	if err == nil {
		jsonConditionSplitState, _ := json.Marshal(dst.ConditionSplitState)
		if string(jsonConditionSplitState) == "{}" { // empty struct
			dst.ConditionSplitState = nil
		} else {
			return nil // data stored in dst.ConditionSplitState, return on the first match
		}
	} else {
		dst.ConditionSplitState = nil
	}

	// try to unmarshal JSON data into DestinationState
	decoder = json.NewDecoder(bytes.NewReader(data))
	decoder.DisallowUnknownFields()
	err = decoder.Decode(&dst.DestinationState)
	if err == nil {
		jsonDestinationState, _ := json.Marshal(dst.DestinationState)
		if string(jsonDestinationState) == "{}" { // empty struct
			dst.DestinationState = nil
		} else {
			return nil // data stored in dst.DestinationState, return on the first match
		}
	} else {
		dst.DestinationState = nil
	}

	// try to unmarshal JSON data into EventEntryState
	decoder = json.NewDecoder(bytes.NewReader(data))
	decoder.DisallowUnknownFields()
	err = decoder.Decode(&dst.EventEntryState)
	if err == nil {
		jsonEventEntryState, _ := json.Marshal(dst.EventEntryState)
		if string(jsonEventEntryState) == "{}" { // empty struct
			dst.EventEntryState = nil
		} else {
			return nil // data stored in dst.EventEntryState, return on the first match
		}
	} else {
		dst.EventEntryState = nil
	}

	// try to unmarshal JSON data into EventSplitWithTimeoutState
	decoder = json.NewDecoder(bytes.NewReader(data))
	decoder.DisallowUnknownFields()
	err = decoder.Decode(&dst.EventSplitWithTimeoutState)
	if err == nil {
		jsonEventSplitWithTimeoutState, _ := json.Marshal(dst.EventSplitWithTimeoutState)
		if string(jsonEventSplitWithTimeoutState) == "{}" { // empty struct
			dst.EventSplitWithTimeoutState = nil
		} else {
			return nil // data stored in dst.EventSplitWithTimeoutState, return on the first match
		}
	} else {
		dst.EventSplitWithTimeoutState = nil
	}

	// try to unmarshal JSON data into ExitState
	decoder = json.NewDecoder(bytes.NewReader(data))
	decoder.DisallowUnknownFields()
	err = decoder.Decode(&dst.ExitState)
	if err == nil {
		jsonExitState, _ := json.Marshal(dst.ExitState)
		if string(jsonExitState) == "{}" { // empty struct
			dst.ExitState = nil
		} else {
			return nil // data stored in dst.ExitState, return on the first match
		}
	} else {
		dst.ExitState = nil
	}

	// try to unmarshal JSON data into RandomSplitState
	decoder = json.NewDecoder(bytes.NewReader(data))
	decoder.DisallowUnknownFields()
	err = decoder.Decode(&dst.RandomSplitState)
	if err == nil {
		jsonRandomSplitState, _ := json.Marshal(dst.RandomSplitState)
		if string(jsonRandomSplitState) == "{}" { // empty struct
			dst.RandomSplitState = nil
		} else {
			return nil // data stored in dst.RandomSplitState, return on the first match
		}
	} else {
		dst.RandomSplitState = nil
	}

	// try to unmarshal JSON data into SimpleDelayState
	decoder = json.NewDecoder(bytes.NewReader(data))
	decoder.DisallowUnknownFields()
	err = decoder.Decode(&dst.SimpleDelayState)
	if err == nil {
		jsonSimpleDelayState, _ := json.Marshal(dst.SimpleDelayState)
		if string(jsonSimpleDelayState) == "{}" { // empty struct
			dst.SimpleDelayState = nil
		} else {
			return nil // data stored in dst.SimpleDelayState, return on the first match
		}
	} else {
		dst.SimpleDelayState = nil
	}

	return fmt.Errorf("data failed to match schemas in anyOf(JourneyState)")
}

// Marshal data from the first non-nil pointers in the struct to JSON
func (src *JourneyState) MarshalJSON() ([]byte, error) {
	if src.AudienceEntryState != nil {
		return json.Marshal(&src.AudienceEntryState)
	}

	if src.ConditionSplitState != nil {
		return json.Marshal(&src.ConditionSplitState)
	}

	if src.DestinationState != nil {
		return json.Marshal(&src.DestinationState)
	}

	if src.EventEntryState != nil {
		return json.Marshal(&src.EventEntryState)
	}

	if src.EventSplitWithTimeoutState != nil {
		return json.Marshal(&src.EventSplitWithTimeoutState)
	}

	if src.ExitState != nil {
		return json.Marshal(&src.ExitState)
	}

	if src.RandomSplitState != nil {
		return json.Marshal(&src.RandomSplitState)
	}

	if src.SimpleDelayState != nil {
		return json.Marshal(&src.SimpleDelayState)
	}

	return nil, nil // no data in anyOf schemas
}

type NullableJourneyState struct {
	value *JourneyState
	isSet bool
}

func (v NullableJourneyState) Get() *JourneyState {
	return v.value
}

func (v *NullableJourneyState) Set(val *JourneyState) {
	v.value = val
	v.isSet = true
}

func (v NullableJourneyState) IsSet() bool {
	return v.isSet
}

func (v *NullableJourneyState) Unset() {
	v.value = nil
	v.isSet = false
}

func NewNullableJourneyState(val *JourneyState) *NullableJourneyState {
	return &NullableJourneyState{value: val, isSet: true}
}

func (v NullableJourneyState) MarshalJSON() ([]byte, error) {
	return json.Marshal(v.value)
}

func (v *NullableJourneyState) UnmarshalJSON(src []byte) error {
	v.isSet = true
	return json.Unmarshal(src, &v.value)
}
